generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Lieu {
  id        String    @id @default(uuid())
  name      String
  order     Int       @default(0)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  elements  Element[]
}

enum ElementType {
  niveau
  espace
}

model Element {
  id        String      @id @default(uuid())
  name      String
  type      ElementType
  order     Int         @default(0)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt

  lieuId    String
  lieu      Lieu        @relation(fields: [lieuId], references: [id], onDelete: Cascade)

  parentId  String?
  parent    Element?    @relation("ElementHierarchy", fields: [parentId], references: [id], onDelete: SetNull)
  children  Element[]   @relation("ElementHierarchy")

  @@index([lieuId])
  @@index([parentId])
}
